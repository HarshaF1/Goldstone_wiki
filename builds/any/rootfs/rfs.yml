Multistrap:
  General:
    arch: ${ARCH}
    cleanup: true
    noauth: true
    explicitsuite: false
    unpack: true
    debootstrap: Local-Arch Local-All Debian Ubuntu-PPA
    aptsources: Debian ONL

  Debian:
    source: http://${DEBIAN_MIRROR}
    suite: ${ONL_DEBIAN_SUITE}
    keyring: debian-archive-keyring
    omitdebsrc: true

  ONL:
    source: http://apt.opennetlinux.org/debian
    suite: unstable
    omitdebsrc: true

  Local-All:
    packages:
    - python-sonic-utilities:all
    source: ${ONLPM_OPTION_REPO}/${ONL_DEBIAN_SUITE}/packages/binary-all
    omitdebsrc: true

  Local-Arch:
    packages:
    - x1-docker-database:amd64
    - x1-docker-syncd:amd64
    - x1-docker-orchagent:amd64
      #    - x1-docker-fpm-frr:amd64
      #    - x1-docker-router-advertiser:amd64
      #    - x1-docker-teamd:amd64
      #    - x1-docker-lldp-sv2:amd64
      #    - x1-docker-dhcp-relay:amd64
      #    - x1-docker-snmp-sv2:amd64
    source: ${ONLPM_OPTION_REPO}/${ONL_DEBIAN_SUITE}/packages/binary-${ARCH}
    omitdebsrc: true

  Ubuntu-PPA:
    packages: podman
    source: http://ppa.launchpad.net/projectatomic/ppa/ubuntu
    suite: bionic
    omitdebsrc: true

Configure:
  commands:
    - 'sudo rm -rf __rfs__/var/tmp'
    - 'sudo mkdir -p __rfs__/var/tmp'
    - 'sudo mkdir -p __rfs__/host/warmboot'
    - 'sudo mkdir -p __rfs__/var/log/swss'

  files:
    remove:
    - /tmp
    - /etc/motd
    - /etc/inittab
    - /usr/bin/reboot # remove SONiC reboot
    - /etc/udev/rules.d/60-block.rules
    - /etc/udev/rules.d/60-net.rules
    - /etc/boot.d/70.dhclient.conf
